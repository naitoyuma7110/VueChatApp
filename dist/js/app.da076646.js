(function(){"use strict";var e={299:function(e,t,s){s.d(t,{db:function(){return ee}});var r=s(144),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Header"),t("main",[t("router-view")],1)],1)},i=[],a=function(){var e=this,t=e._self._c;return t("header",[t("router-link",{attrs:{to:"/"}},[t("img",{attrs:{src:s(949)}})]),e.currentUser?t("div",{staticClass:"btns"},[t("router-link",{attrs:{to:`/user/${e.currentUser.uid}`}},[t("button",{style:`background-image: url(${e.currentUser.photoURL})`})]),t("button",{on:{click:e.signOut}},[t("fa",{attrs:{icon:"sign-out-alt"}})],1)],1):t("div",{staticClass:"btns"},[t("button",[t("fa",{attrs:{icon:"user"},on:{click:e.signIn}})],1)])],1)},o=[],u=s(690),c=s(321),h={methods:{async signIn(){const e=new u.hJ,t=(0,u.v0)();await(0,u.rh)(t,e).then((e=>{this.createUser(e.user),this.$router.push(`/user/${e.user.uid}`)})).catch((e=>{console.error(e)}))},signOut(){const e=(0,u.v0)();window.confirm("Are You Sure to Sign Out?")&&e.signOut().then((()=>{alert("You Safely Signed Out."),"/"!==this.$route.name&&this.$router.push("/")}))},async createUser(e){try{const t=(0,c.JU)(ee,"users",e.uid),s={name:e.displayName,photoURL:e.photoURL,email:e.email,uid:e.uid};await(0,c.pl)(t,s)}catch(t){console.error("Error adding document: ",t)}}},data(){return{currentUser:""}},created(){const e=(0,u.v0)();e.onAuthStateChanged((e=>{this.currentUser=e}))}},d=h,l=s(1),p=(0,l.Z)(d,a,o,!1,null,"31f38be2",null),f=p.exports,m={components:{Header:f}},v=m,w=(0,l.Z)(v,n,i,!1,null,null,null),y=w.exports,g=s(345),b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"list"},e._l(e.whispers,(function(e){return t("Item",{key:e.id,attrs:{id:e.id,uid:e.data().uid}})})),1)])},_=[],U=function(){var e=this,t=e._self._c;return t("li",{staticClass:"item"},[t("div",{staticClass:"user-box"},[t("div",{staticClass:"avatar",style:`background-image: url(${e.user.photoURL})`}),t("p",{staticClass:"user-name"},[e._v(e._s(e.whisper.name))])]),e.editing?t("div",{staticClass:"editor"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.whisper.content,expression:"whisper.content"}],attrs:{placeholder:"edit whisper"},domProps:{value:e.whisper.content},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateWhisper.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.whisper,"content",t.target.value)}}}),t("p",{staticClass:"message"},[e._v("Press Enter to Whisper")])]):t("div",{staticClass:"content",domProps:{innerHTML:e._s(e.whisper.content)}}),e.currentUser&&e.currentUser.uid==e.user.uid?t("button",{on:{click:function(t){e.showBtns=!e.showBtns}}},[t("fa",{attrs:{icon:"ellipsis-v"}})],1):e._e(),e.showBtns?t("div",{staticClass:"controls"},[t("li",{on:{click:function(t){e.editing=!e.editing}}},[e._v("edit")]),t("li",{staticStyle:{color:"red"},on:{click:e.deleteWhisper}},[e._v(" delete ")])]):e._e()])},k=[],C=s(774),O={props:["id","uid"],data(){return{whisper:{},user:[],currentUser:{},showBtns:!1,editing:!1}},created(){const e=(0,C.v0)();e.onAuthStateChanged((e=>{this.currentUser=e}))},methods:{async deleteWhisper(){if(window.confirm("Are You Sure to Delete This Whisper?")){const e=(0,c.JU)(ee,"whispers",this.id);await(0,c.oe)(e)}},async updateWhisper(){const e=(0,c.JU)(ee,"whispers",this.id),t=new Date,s={content:this.whisper.content,date:t};await(0,c.r7)(e,s).then(this.editing=!1)}},mounted:async function(){const e=(0,c.hJ)(ee,"whispers");await(0,c.PL)((0,c.IO)(e,(0,c.ar)((0,c.Jm)(),"==",this.id))).then((e=>{e.forEach((e=>{this.whisper=e.data()}))}));const t=(0,c.hJ)(ee,"users");await(0,c.PL)((0,c.IO)(t,(0,c.ar)("uid","==",this.uid))).then((e=>{e.forEach((e=>{this.user=e.data()}))}))}},W=O,x=(0,l.Z)(W,U,k,!1,null,null,null),I=x.exports,P={name:"home",components:{Item:I},data(){return{whispers:[],unsubscribe:null}},mounted:async function(){const e=(0,c.IO)((0,c.hJ)(ee,"whispers"),(0,c.Xo)("date","desc"));this.unsubscribe=(0,c.cf)(e,(e=>{const t=[];e.forEach((e=>{t.push(e)})),this.whispers=t}))},beforeDestroy(){this.unsubscribe()}},E=P,Z=(0,l.Z)(E,b,_,!1,null,"239e2eee",null),L=Z.exports,$=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"user"}},[t("div",{staticClass:"user-title"},[t("div",{staticClass:"avatar",style:`background-image: url(${e.user.photoURL})`}),t("div",{staticClass:"texts"},[t("h1",[e._v(e._s(e.user.name))]),e.myWhispers.length>1?t("p",[e._v(e._s(e.myWhispers.length)+" whispers")]):t("p",[e._v(e._s(e.myWhispers.length)+" whisper")])])]),t("div",{staticClass:"list"},[t("Editor",{attrs:{currentUser:e.currentUser}}),e._l(e.myWhispers,(function(e){return t("Item",{key:e.id,attrs:{id:e.id,uid:e.data().uid}})}))],2)])},S=[],J=function(){var e=this,t=e._self._c;return t("li",{staticClass:"item"},[t("div",{staticClass:"user-box"},[t("div",{staticClass:"avatar",style:`background-image: url(${e.currentUser?e.currentUser.photoURL:""})`}),t("p",{staticClass:"user-name"},[e._v(e._s(e.currentUser?e.currentUser.displayName:""))])]),t("div",{staticClass:"editor"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newWhisper,expression:"newWhisper"}],attrs:{placeholder:"new whisper"},domProps:{value:e.newWhisper},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createWhisper.apply(null,arguments)},input:function(t){t.target.composing||(e.newWhisper=t.target.value)}}}),t("p",{staticClass:"message"},[e._v("Press Enter to Whisper")])])])},j=[],A={props:{currentUser:{typeof:Object}},data(){return{newWhisper:""}},methods:{async createWhisper(){try{const e=new Date,t=(0,c.hJ)(ee,"whispers"),s={content:this.newWhisper,date:e,uid:this.currentUser.uid};await(0,c.ET)(t,s).then(this.newWhisper="")}catch(e){console.error("Error adding document: ",e)}}}},D=A,R=(0,l.Z)(D,J,j,!1,null,null,null),B=R.exports,N={components:{Item:I,Editor:B},data(){return{user:"",myWhispers:[],currentUser:"",unsubscribe:null}},created(){const e=(0,u.v0)();e.onAuthStateChanged((e=>{this.currentUser=e}))},mounted:async function(){const e=(0,c.hJ)(ee,"users");await(0,c.PL)((0,c.IO)(e,(0,c.ar)("uid","==",this.$route.params.uid))).then((e=>{e.forEach((e=>{this.user=e.data()}))}));const t=(0,c.hJ)(ee,"whispers"),s=(0,c.IO)(t,(0,c.ar)("uid","==",this.$route.params.uid),(0,c.Xo)("date","desc"));this.unsubscribe=(0,c.cf)(s,(e=>{const t=[];e.forEach((e=>{t.push(e)})),this.myWhispers=t}))},beforeDestroy(){this.unsubscribe()}},T=N,H=(0,l.Z)(T,$,S,!1,null,"5f75075f",null),F=H.exports;r.ZP.use(g.ZP);const M=[{path:"/",name:"home",component:L},{path:"/user/:uid",name:"user",component:F}],X=new g.ZP({mode:"history",base:"/",routes:M});var Y=X,G=s(636),z=s(417),V=s(810),K=s(816);r.ZP.config.productionTip=!1,r.ZP.component("fa",V.GN),G.vI.add(z.ILF,z.jLD,z.iV1);const q={apiKey:"AIzaSyAVbaMi0wv2PwszFHx0I8BNitiYXHydjyo",authDomain:"vue-whisper.firebaseapp.com",databaseURL:"https://vue-whisper-default-rtdb.firebaseio.com",projectId:"vue-whisper",storageBucket:"vue-whisper.appspot.com",messagingSenderId:"161235616759",appId:"1:161235616759:web:9b040367f7f7554650a4f2",measurementId:"G-P8MXM0ZSGE"},Q=(0,K.ZF)(q),ee=(0,c.ad)(Q);new r.ZP({router:Y,render:function(e){return e(y)}}).$mount("#app")},949:function(e,t,s){e.exports=s.p+"img/logo.1a7b4063.png"}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,i){if(!r){var a=1/0;for(h=0;h<e.length;h++){r=e[h][0],n=e[h][1],i=e[h][2];for(var o=!0,u=0;u<r.length;u++)(!1&i||a>=i)&&Object.keys(s.O).every((function(e){return s.O[e](r[u])}))?r.splice(u--,1):(o=!1,i<a&&(a=i));if(o){e.splice(h--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var h=e.length;h>0&&e[h-1][2]>i;h--)e[h]=e[h-1];e[h]=[r,n,i]}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,i,a=r[0],o=r[1],u=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(u)var h=u(s)}for(t&&t(r);c<a.length;c++)i=a[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(h)},r=self["webpackChunkvue_whisper"]=self["webpackChunkvue_whisper"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(299)}));r=s.O(r)})();
//# sourceMappingURL=app.da076646.js.map